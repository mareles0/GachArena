{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class StorageService {\n  constructor(http) {\n    this.http = http;\n  }\n\n  uploadImage(file, path) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        console.log('[Storage] Uploading image to:', path);\n        console.log('[Storage] File:', file.name, file.size, 'bytes');\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('path', path);\n        const response = yield _this.http.post(`${environment.backendUrl}/storage/upload`, formData).toPromise();\n        const downloadURL = response.downloadURL;\n        console.log('[Storage] Download URL:', downloadURL);\n        return downloadURL;\n      } catch (error) {\n        console.error('[Storage] Erro ao fazer upload:', error);\n        throw error;\n      }\n    })();\n  }\n\n  uploadBoxImage(file, boxName) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${boxName}_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `boxes/${fileName}`;\n      return _this2.uploadImage(file, path);\n    })();\n  }\n\n  uploadItemImage(file, itemName, boxName) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${itemName}_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `items/${boxName}/${fileName}`;\n      return _this3.uploadImage(file, path);\n    })();\n  }\n\n  uploadBoxAnimation(file, boxName) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${boxName}_animation_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `animations/${fileName}`;\n      return _this4.uploadImage(file, path);\n    })();\n  }\n\n  deleteImage(imageUrl) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this5.http.delete(`${environment.backendUrl}/storage/delete`, {\n          body: {\n            imageUrl\n          }\n        }).toPromise();\n      } catch (error) {\n        console.error('Erro ao deletar imagem:', error);\n      }\n    })();\n  }\n\n}\n\nStorageService.ɵfac = function StorageService_Factory(t) {\n  return new (t || StorageService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nStorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StorageService,\n  factory: StorageService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/src/app/services/storage.service.ts"],"names":["environment","i0","i1","StorageService","constructor","http","uploadImage","file","path","console","log","name","size","formData","FormData","append","response","post","backendUrl","toPromise","downloadURL","error","uploadBoxImage","boxName","timestamp","Date","now","fileName","split","pop","uploadItemImage","itemName","uploadBoxAnimation","deleteImage","imageUrl","delete","body","ɵfac","StorageService_Factory","t","ɵɵinject","HttpClient","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { environment } from '../../environments/environment';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nexport class StorageService {\r\n    constructor(http) {\r\n        this.http = http;\r\n    }\r\n    async uploadImage(file, path) {\r\n        try {\r\n            console.log('[Storage] Uploading image to:', path);\r\n            console.log('[Storage] File:', file.name, file.size, 'bytes');\r\n            const formData = new FormData();\r\n            formData.append('file', file);\r\n            formData.append('path', path);\r\n            const response = await this.http.post(`${environment.backendUrl}/storage/upload`, formData).toPromise();\r\n            const downloadURL = response.downloadURL;\r\n            console.log('[Storage] Download URL:', downloadURL);\r\n            return downloadURL;\r\n        }\r\n        catch (error) {\r\n            console.error('[Storage] Erro ao fazer upload:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async uploadBoxImage(file, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${boxName}_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `boxes/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async uploadItemImage(file, itemName, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${itemName}_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `items/${boxName}/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async uploadBoxAnimation(file, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${boxName}_animation_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `animations/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async deleteImage(imageUrl) {\r\n        try {\r\n            await this.http.delete(`${environment.backendUrl}/storage/delete`, { body: { imageUrl } }).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao deletar imagem:', error);\r\n        }\r\n    }\r\n}\r\nStorageService.ɵfac = function StorageService_Factory(t) { return new (t || StorageService)(i0.ɵɵinject(i1.HttpClient)); };\r\nStorageService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: StorageService, factory: StorageService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}