{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let MissionService = /*#__PURE__*/(() => {\n  class MissionService {\n    constructor(http) {\n      this.http = http;\n    } // CRUD Missões\n\n\n    createMission(mission) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const response = yield _this.http.post(`${environment.backendUrl}/missions`, mission).toPromise();\n          return response.id;\n        } catch (error) {\n          console.error('Erro ao criar missão:', error);\n          throw error;\n        }\n      })();\n    }\n\n    getMission(id) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const mission = yield _this2.http.get(`${environment.backendUrl}/missions/${id}`).toPromise();\n          return mission || null;\n        } catch (error) {\n          console.error('Erro ao buscar missão:', error);\n          return null;\n        }\n      })();\n    }\n\n    getAllMissions() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const missions = yield _this3.http.get(`${environment.backendUrl}/missions`).toPromise();\n          return missions || [];\n        } catch (error) {\n          console.error('Erro ao buscar missões:', error);\n          return [];\n        }\n      })();\n    }\n\n    getActiveMissions() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const missions = yield _this4.http.get(`${environment.backendUrl}/missions/active`).toPromise();\n          return missions || [];\n        } catch (error) {\n          console.error('Erro ao buscar missões ativas:', error);\n          return [];\n        }\n      })();\n    }\n\n    updateMission(id, mission) {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          if (!id || typeof id !== 'string' || id.trim() === '' || id.includes('/')) {\n            console.error('Invalid mission id provided to updateMission:', id);\n            throw new Error('Invalid mission id provided to updateMission');\n          }\n\n          yield _this5.http.put(`${environment.backendUrl}/missions/${id}`, mission).toPromise();\n        } catch (error) {\n          console.error('Erro ao atualizar missão:', error);\n          throw error;\n        }\n      })();\n    }\n\n    deleteMission(id) {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          if (!id || typeof id !== 'string' || id.trim() === '' || id.includes('/')) {\n            console.error('Invalid mission id provided to deleteMission:', id);\n            throw new Error('Invalid mission id provided to deleteMission');\n          }\n\n          yield _this6.http.delete(`${environment.backendUrl}/missions/${id}`).toPromise();\n        } catch (error) {\n          console.error('Erro ao deletar missão:', error);\n          throw error;\n        }\n      })();\n    } // UserMissions\n\n\n    getUserMissions(userId) {\n      var _this7 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const userMissions = yield _this7.http.get(`${environment.backendUrl}/missions/user/${userId}`).toPromise();\n          return userMissions || [];\n        } catch (error) {\n          console.error('Erro ao buscar missões do usuário:', error);\n          return [];\n        }\n      })();\n    }\n\n    startMission(userId, missionId) {\n      var _this8 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const response = yield _this8.http.post(`${environment.backendUrl}/missions/user/${userId}/start/${missionId}`, {}).toPromise();\n          return response.id;\n        } catch (error) {\n          console.error('Erro ao iniciar missão:', error);\n          throw error;\n        }\n      })();\n    }\n\n    claimMission(userMissionId) {\n      var _this9 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this9.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/claim`, {}).toPromise();\n        } catch (error) {\n          console.error('Erro ao marcar missão como coletada:', error);\n          throw error;\n        }\n      })();\n    }\n\n    claimDaily(userMissionId, day) {\n      var _this0 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this0.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/claim-daily`, {\n            day\n          }).toPromise();\n        } catch (error) {\n          console.error('Erro ao coletar dia:', error);\n          throw error;\n        }\n      })();\n    }\n\n    updateProgress(userMissionId, progress) {\n      var _this1 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this1.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/progress`, {\n            progress\n          }).toPromise();\n        } catch (error) {\n          console.error('Erro ao atualizar progresso:', error);\n          throw error;\n        }\n      })();\n    }\n\n    completeMission(userMissionId) {\n      var _this10 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this10.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/complete`, {}).toPromise();\n        } catch (error) {\n          console.error('Erro ao completar missão:', error);\n          throw error;\n        }\n      })();\n    }\n\n  }\n\n  MissionService.ɵfac = function MissionService_Factory(t) {\n    return new (t || MissionService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  MissionService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: MissionService,\n    factory: MissionService.ɵfac,\n    providedIn: 'root'\n  });\n  return MissionService;\n})();","map":null,"metadata":{},"sourceType":"module"}