{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from '../../environments/environment';\nimport { getAuth } from 'firebase/auth';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./ticket.service\";\nexport let UserService = /*#__PURE__*/(() => {\n  class UserService {\n    constructor(http, ticketService) {\n      this.http = http;\n      this.ticketService = ticketService;\n    } // Salvar dados do usuário\n\n\n    saveUser(uid, userData) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this.http.post(`${environment.backendUrl}/users/${uid}`, userData).toPromise();\n        } catch (error) {\n          throw error;\n        }\n      })();\n    } // Buscar dados do usuário\n\n\n    getUser(uid) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          return yield _this2.http.get(`${environment.backendUrl}/users/${uid}`).toPromise();\n        } catch (error) {\n          throw error;\n        }\n      })();\n    } // Buscar usuário por ID retornando User tipado\n\n\n    getUserById(uid) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const data = yield _this3.http.get(`${environment.backendUrl}/users/${uid}`).toPromise();\n          return data ? Object.assign({\n            id: uid\n          }, data) : null;\n        } catch (error) {\n          console.error('Erro ao buscar usuário:', error);\n          return null;\n        }\n      })();\n    } // Buscar todos os usuários\n\n\n    getAllUsers() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const data = yield _this4.http.get(`${environment.backendUrl}/users`).toPromise();\n          return data;\n        } catch (error) {\n          console.error('Erro ao buscar usuários:', error);\n          return [];\n        }\n      })();\n    } // Atualizar usuário\n\n\n    updateUser(uid, data) {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this5.http.put(`${environment.backendUrl}/users/${uid}`, data).toPromise();\n        } catch (error) {\n          console.error('Erro ao atualizar usuário:', error);\n          throw error;\n        }\n      })();\n    } // Adicionar tickets ao usuário\n\n\n    addTickets(_x, _x2) {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* (uid, amount, type = 'normal') {\n        try {\n          yield _this6.http.post(`${environment.backendUrl}/users/${uid}/tickets`, {\n            amount,\n            type\n          }).toPromise();\n        } catch (error) {\n          console.error('Erro ao adicionar tickets:', error);\n          throw error;\n        }\n      }).apply(this, arguments);\n    } // Pegar ID do usuário atual\n\n\n    getCurrentUserId() {\n      return _asyncToGenerator(function* () {\n        var _a;\n\n        return ((_a = getAuth().currentUser) === null || _a === void 0 ? void 0 : _a.uid) || null;\n      })();\n    } // Verificar se username já existe\n\n\n    checkUsernameExists(username) {\n      return _asyncToGenerator(function* () {\n        // Implementar busca por username na coleção users\n        // Por enquanto retorna false\n        return false;\n      })();\n    }\n\n  }\n\n  UserService.ɵfac = function UserService_Factory(t) {\n    return new (t || UserService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.TicketService));\n  };\n\n  UserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UserService,\n    factory: UserService.ɵfac,\n    providedIn: 'root'\n  });\n  return UserService;\n})();","map":null,"metadata":{},"sourceType":"module"}