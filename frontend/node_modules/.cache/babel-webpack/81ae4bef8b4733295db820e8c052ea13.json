{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { storage } from '../firebase.config';\nimport * as i0 from \"@angular/core\";\nexport class StorageService {\n  uploadImage(file, path) {\n    return _asyncToGenerator(function* () {\n      try {\n        console.log('[Storage] Uploading image to:', path);\n        console.log('[Storage] File:', file.name, file.size, 'bytes');\n        const storageRef = ref(storage, path);\n        console.log('[Storage] Storage ref created:', storageRef.fullPath);\n        const snapshot = yield uploadBytes(storageRef, file);\n        console.log('[Storage] Upload successful! Snapshot:', snapshot);\n        const downloadURL = yield getDownloadURL(snapshot.ref);\n        console.log('[Storage] Download URL:', downloadURL);\n        return downloadURL;\n      } catch (error) {\n        console.error('[Storage] Erro ao fazer upload:', error);\n        throw error;\n      }\n    })();\n  }\n\n  uploadBoxImage(file, boxName) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${boxName}_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `boxes/${fileName}`;\n      return _this.uploadImage(file, path);\n    })();\n  }\n\n  uploadItemImage(file, itemName, boxName) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${itemName}_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `items/${boxName}/${fileName}`;\n      return _this2.uploadImage(file, path);\n    })();\n  }\n\n  uploadBoxAnimation(file, boxName) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${boxName}_animation_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `animations/${fileName}`;\n      return _this3.uploadImage(file, path);\n    })();\n  }\n\n  deleteImage(imageUrl) {\n    return _asyncToGenerator(function* () {\n      try {\n        const imageRef = ref(storage, imageUrl);\n        yield deleteObject(imageRef);\n      } catch (error) {\n        console.error('Erro ao deletar imagem:', error);\n      }\n    })();\n  }\n\n}\n\nStorageService.ɵfac = function StorageService_Factory(t) {\n  return new (t || StorageService)();\n};\n\nStorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StorageService,\n  factory: StorageService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/src/app/services/storage.service.ts"],"names":["ref","uploadBytes","getDownloadURL","deleteObject","storage","i0","StorageService","uploadImage","file","path","console","log","name","size","storageRef","fullPath","snapshot","downloadURL","error","uploadBoxImage","boxName","timestamp","Date","now","fileName","split","pop","uploadItemImage","itemName","uploadBoxAnimation","deleteImage","imageUrl","imageRef","ɵfac","StorageService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\r\nimport { storage } from '../firebase.config';\r\nimport * as i0 from \"@angular/core\";\r\nexport class StorageService {\r\n    async uploadImage(file, path) {\r\n        try {\r\n            console.log('[Storage] Uploading image to:', path);\r\n            console.log('[Storage] File:', file.name, file.size, 'bytes');\r\n            const storageRef = ref(storage, path);\r\n            console.log('[Storage] Storage ref created:', storageRef.fullPath);\r\n            const snapshot = await uploadBytes(storageRef, file);\r\n            console.log('[Storage] Upload successful! Snapshot:', snapshot);\r\n            const downloadURL = await getDownloadURL(snapshot.ref);\r\n            console.log('[Storage] Download URL:', downloadURL);\r\n            return downloadURL;\r\n        }\r\n        catch (error) {\r\n            console.error('[Storage] Erro ao fazer upload:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async uploadBoxImage(file, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${boxName}_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `boxes/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async uploadItemImage(file, itemName, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${itemName}_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `items/${boxName}/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async uploadBoxAnimation(file, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${boxName}_animation_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `animations/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async deleteImage(imageUrl) {\r\n        try {\r\n            const imageRef = ref(storage, imageUrl);\r\n            await deleteObject(imageRef);\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao deletar imagem:', error);\r\n        }\r\n    }\r\n}\r\nStorageService.ɵfac = function StorageService_Factory(t) { return new (t || StorageService)(); };\r\nStorageService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: StorageService, factory: StorageService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}