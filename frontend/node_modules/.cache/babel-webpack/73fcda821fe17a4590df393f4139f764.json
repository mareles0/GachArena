{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class MissionService {\n  constructor(http) {\n    this.http = http;\n  } // CRUD Missões\n\n\n  createMission(mission) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const response = yield _this.http.post(`${environment.backendUrl}/missions`, mission).toPromise();\n        return response.id;\n      } catch (error) {\n        console.error('Erro ao criar missão:', error);\n        throw error;\n      }\n    })();\n  }\n\n  getMission(id) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const mission = yield _this2.http.get(`${environment.backendUrl}/missions/${id}`).toPromise();\n        return mission || null;\n      } catch (error) {\n        console.error('Erro ao buscar missão:', error);\n        return null;\n      }\n    })();\n  }\n\n  getAllMissions() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const missions = yield _this3.http.get(`${environment.backendUrl}/missions`).toPromise();\n        return missions || [];\n      } catch (error) {\n        console.error('Erro ao buscar missões:', error);\n        return [];\n      }\n    })();\n  }\n\n  getActiveMissions() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const missions = yield _this4.http.get(`${environment.backendUrl}/missions/active`).toPromise();\n        return missions || [];\n      } catch (error) {\n        console.error('Erro ao buscar missões ativas:', error);\n        return [];\n      }\n    })();\n  }\n\n  updateMission(id, mission) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        if (!id || typeof id !== 'string' || id.trim() === '' || id.includes('/')) {\n          console.error('Invalid mission id provided to updateMission:', id);\n          throw new Error('Invalid mission id provided to updateMission');\n        }\n\n        yield _this5.http.put(`${environment.backendUrl}/missions/${id}`, mission).toPromise();\n      } catch (error) {\n        console.error('Erro ao atualizar missão:', error);\n        throw error;\n      }\n    })();\n  }\n\n  deleteMission(id) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        if (!id || typeof id !== 'string' || id.trim() === '' || id.includes('/')) {\n          console.error('Invalid mission id provided to deleteMission:', id);\n          throw new Error('Invalid mission id provided to deleteMission');\n        }\n\n        yield _this6.http.delete(`${environment.backendUrl}/missions/${id}`).toPromise();\n      } catch (error) {\n        console.error('Erro ao deletar missão:', error);\n        throw error;\n      }\n    })();\n  } // UserMissions\n\n\n  getUserMissions(userId) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const userMissions = yield _this7.http.get(`${environment.backendUrl}/missions/user/${userId}`).toPromise();\n        return userMissions || [];\n      } catch (error) {\n        console.error('Erro ao buscar missões do usuário:', error);\n        return [];\n      }\n    })();\n  }\n\n  startMission(userId, missionId) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const response = yield _this8.http.post(`${environment.backendUrl}/missions/user/${userId}/start/${missionId}`, {}).toPromise();\n        return response.id;\n      } catch (error) {\n        console.error('Erro ao iniciar missão:', error);\n        throw error;\n      }\n    })();\n  }\n\n  claimMission(userMissionId) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this9.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/claim`, {}).toPromise();\n      } catch (error) {\n        console.error('Erro ao marcar missão como coletada:', error);\n        throw error;\n      }\n    })();\n  }\n\n  claimDaily(userMissionId, day) {\n    var _this0 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this0.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/claim-daily`, {\n          day\n        }).toPromise();\n      } catch (error) {\n        console.error('Erro ao coletar dia:', error);\n        throw error;\n      }\n    })();\n  }\n\n  updateProgress(userMissionId, progress) {\n    var _this1 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this1.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/progress`, {\n          progress\n        }).toPromise();\n      } catch (error) {\n        console.error('Erro ao atualizar progresso:', error);\n        throw error;\n      }\n    })();\n  }\n\n  completeMission(userMissionId) {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this10.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/complete`, {}).toPromise();\n      } catch (error) {\n        console.error('Erro ao completar missão:', error);\n        throw error;\n      }\n    })();\n  }\n\n}\n\nMissionService.ɵfac = function MissionService_Factory(t) {\n  return new (t || MissionService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nMissionService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: MissionService,\n  factory: MissionService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/src/app/services/mission.service.ts"],"names":["environment","i0","i1","MissionService","constructor","http","createMission","mission","response","post","backendUrl","toPromise","id","error","console","getMission","get","getAllMissions","missions","getActiveMissions","updateMission","trim","includes","Error","put","deleteMission","delete","getUserMissions","userId","userMissions","startMission","missionId","claimMission","userMissionId","claimDaily","day","updateProgress","progress","completeMission","ɵfac","MissionService_Factory","t","ɵɵinject","HttpClient","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { environment } from '../../environments/environment';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nexport class MissionService {\r\n    constructor(http) {\r\n        this.http = http;\r\n    }\r\n    // CRUD Missões\r\n    async createMission(mission) {\r\n        try {\r\n            const response = await this.http.post(`${environment.backendUrl}/missions`, mission).toPromise();\r\n            return response.id;\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao criar missão:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async getMission(id) {\r\n        try {\r\n            const mission = await this.http.get(`${environment.backendUrl}/missions/${id}`).toPromise();\r\n            return mission || null;\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao buscar missão:', error);\r\n            return null;\r\n        }\r\n    }\r\n    async getAllMissions() {\r\n        try {\r\n            const missions = await this.http.get(`${environment.backendUrl}/missions`).toPromise();\r\n            return missions || [];\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao buscar missões:', error);\r\n            return [];\r\n        }\r\n    }\r\n    async getActiveMissions() {\r\n        try {\r\n            const missions = await this.http.get(`${environment.backendUrl}/missions/active`).toPromise();\r\n            return missions || [];\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao buscar missões ativas:', error);\r\n            return [];\r\n        }\r\n    }\r\n    async updateMission(id, mission) {\r\n        try {\r\n            if (!id || typeof id !== 'string' || id.trim() === '' || id.includes('/')) {\r\n                console.error('Invalid mission id provided to updateMission:', id);\r\n                throw new Error('Invalid mission id provided to updateMission');\r\n            }\r\n            await this.http.put(`${environment.backendUrl}/missions/${id}`, mission).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao atualizar missão:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async deleteMission(id) {\r\n        try {\r\n            if (!id || typeof id !== 'string' || id.trim() === '' || id.includes('/')) {\r\n                console.error('Invalid mission id provided to deleteMission:', id);\r\n                throw new Error('Invalid mission id provided to deleteMission');\r\n            }\r\n            await this.http.delete(`${environment.backendUrl}/missions/${id}`).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao deletar missão:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    // UserMissions\r\n    async getUserMissions(userId) {\r\n        try {\r\n            const userMissions = await this.http.get(`${environment.backendUrl}/missions/user/${userId}`).toPromise();\r\n            return userMissions || [];\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao buscar missões do usuário:', error);\r\n            return [];\r\n        }\r\n    }\r\n    async startMission(userId, missionId) {\r\n        try {\r\n            const response = await this.http.post(`${environment.backendUrl}/missions/user/${userId}/start/${missionId}`, {}).toPromise();\r\n            return response.id;\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao iniciar missão:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async claimMission(userMissionId) {\r\n        try {\r\n            await this.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/claim`, {}).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao marcar missão como coletada:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async claimDaily(userMissionId, day) {\r\n        try {\r\n            await this.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/claim-daily`, { day }).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao coletar dia:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async updateProgress(userMissionId, progress) {\r\n        try {\r\n            await this.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/progress`, { progress }).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao atualizar progresso:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async completeMission(userMissionId) {\r\n        try {\r\n            await this.http.put(`${environment.backendUrl}/missions/user-mission/${userMissionId}/complete`, {}).toPromise();\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao completar missão:', error);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\nMissionService.ɵfac = function MissionService_Factory(t) { return new (t || MissionService)(i0.ɵɵinject(i1.HttpClient)); };\r\nMissionService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: MissionService, factory: MissionService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}