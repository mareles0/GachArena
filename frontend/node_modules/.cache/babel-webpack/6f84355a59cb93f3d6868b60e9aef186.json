{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nexport class StorageService {\n  uploadImage(file, path) {\n    return _asyncToGenerator(function* () {\n      try {\n        console.log('[Storage] Uploading image to:', path);\n        console.log('[Storage] File:', file.name, file.size, 'bytes');\n        const storageRef = ref(storage, path);\n        console.log('[Storage] Storage ref created:', storageRef.fullPath);\n        const snapshot = yield uploadBytes(storageRef, file);\n        console.log('[Storage] Upload successful! Snapshot:', snapshot);\n        const downloadURL = yield getDownloadURL(snapshot.ref);\n        console.log('[Storage] Download URL:', downloadURL);\n        return downloadURL;\n      } catch (error) {\n        console.error('[Storage] Erro ao fazer upload:', error);\n        throw error;\n      }\n    })();\n  }\n\n  uploadBoxImage(file, boxName) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${boxName}_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `boxes/${fileName}`;\n      return _this.uploadImage(file, path);\n    })();\n  }\n\n  uploadItemImage(file, itemName, boxName) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${itemName}_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `items/${boxName}/${fileName}`;\n      return _this2.uploadImage(file, path);\n    })();\n  }\n\n  uploadBoxAnimation(file, boxName) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const timestamp = Date.now();\n      const fileName = `${boxName}_animation_${timestamp}.${file.name.split('.').pop()}`;\n      const path = `animations/${fileName}`;\n      return _this3.uploadImage(file, path);\n    })();\n  }\n\n  deleteImage(imageUrl) {\n    return _asyncToGenerator(function* () {\n      try {\n        const imageRef = ref(storage, imageUrl);\n        yield deleteObject(imageRef);\n      } catch (error) {\n        console.error('Erro ao deletar imagem:', error);\n      }\n    })();\n  }\n\n}\n\nStorageService.ɵfac = function StorageService_Factory(t) {\n  return new (t || StorageService)();\n};\n\nStorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StorageService,\n  factory: StorageService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/olimp/OneDrive/Documentos/estagio/Estagio-etapa-3/GachArena/frontend/src/app/services/storage.service.ts"],"names":["i0","StorageService","uploadImage","file","path","console","log","name","size","storageRef","ref","storage","fullPath","snapshot","uploadBytes","downloadURL","getDownloadURL","error","uploadBoxImage","boxName","timestamp","Date","now","fileName","split","pop","uploadItemImage","itemName","uploadBoxAnimation","deleteImage","imageUrl","imageRef","deleteObject","ɵfac","StorageService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nexport class StorageService {\r\n    async uploadImage(file, path) {\r\n        try {\r\n            console.log('[Storage] Uploading image to:', path);\r\n            console.log('[Storage] File:', file.name, file.size, 'bytes');\r\n            const storageRef = ref(storage, path);\r\n            console.log('[Storage] Storage ref created:', storageRef.fullPath);\r\n            const snapshot = await uploadBytes(storageRef, file);\r\n            console.log('[Storage] Upload successful! Snapshot:', snapshot);\r\n            const downloadURL = await getDownloadURL(snapshot.ref);\r\n            console.log('[Storage] Download URL:', downloadURL);\r\n            return downloadURL;\r\n        }\r\n        catch (error) {\r\n            console.error('[Storage] Erro ao fazer upload:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    async uploadBoxImage(file, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${boxName}_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `boxes/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async uploadItemImage(file, itemName, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${itemName}_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `items/${boxName}/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async uploadBoxAnimation(file, boxName) {\r\n        const timestamp = Date.now();\r\n        const fileName = `${boxName}_animation_${timestamp}.${file.name.split('.').pop()}`;\r\n        const path = `animations/${fileName}`;\r\n        return this.uploadImage(file, path);\r\n    }\r\n    async deleteImage(imageUrl) {\r\n        try {\r\n            const imageRef = ref(storage, imageUrl);\r\n            await deleteObject(imageRef);\r\n        }\r\n        catch (error) {\r\n            console.error('Erro ao deletar imagem:', error);\r\n        }\r\n    }\r\n}\r\nStorageService.ɵfac = function StorageService_Factory(t) { return new (t || StorageService)(); };\r\nStorageService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: StorageService, factory: StorageService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}